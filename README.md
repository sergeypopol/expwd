# Expwd

Structure and functions to work with **application passwords** in Elixir

Application passwords can be used by applications (services, servers, machines...) to
authenticate to each other, as for example the HTTP Basic authentication scheme.

This library provides:
- Function to securely compare application password. Such comparison must be performed in constant time for cleartext password ([details about this attack](https://codahale.com/a-lesson-in-timing-attacks/))
- Functions to work with hashed application passwords. In many cases, it is indeed *not* necessary to store the cleartext password on the server: a hashed version is sufficient (as for *user* passwords).

# Examples

```elixir

iex> Expwd.secure_compare("V01H2GjdTXE3iqDb+3j1VdbM65+/8QcXcjr9dVuMcYE", "ni8fN4rnwavBlbVpRrD/pYcAulaG4pW33fJ")
false

iex> {pwd, hashedpwd} = Expwd.Hashed.gen()
{"daLh2TSthA7x59GR5IPQiy2yGUIDJNi3iHHAlICY3EM",
 %Expwd.Hashed{
   alg: :sha256,
   hash: <<243, 110, 239, 222, 18, 198, 59, 76, 223, 191, 20, 221, 40, 30, 53,
     168, 174, 250, 155, 47, 134, 54, 146, 249, 30, 108, 10, 14, 143, 161, 13,
     51>>
 }}
iex> Expwd.Hashed.to_string(hashedpwd)
"expwd:sha256:827v3hLGO0zfvxTdKB41qK76my+GNpL5HmwKDo+hDTM"

iex> from_str = Expwd.Hashed.from_string("expwd:sha256:827v3hLGO0zfvxTdKB41qK76my+GNpL5HmwKDo+hDTM")
%Expwd.Hashed{
  alg: :sha256,
  hash: <<243, 110, 239, 222, 18, 198, 59, 76, 223, 191, 20, 221, 40, 30, 53,
    168, 174, 250, 155, 47, 134, 54, 146, 249, 30, 108, 10, 14, 143, 161, 13,
    51>>
}

iex> Expwd.secure_compare(pwd, from_str)
true


```

# Security considerations

**Do not use Expwd for user passwords**, which are typically weak and must be processed with special care (salt and different classes of hashing functions).

All application passwords used and generated by Expwd shall be long and generated in a random manner.
